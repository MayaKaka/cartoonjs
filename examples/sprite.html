<canvas id="canvas"></canvas>
<script src="js/libs/require.min.js"></script>
<script> require.config({ baseUrl: '../src', paths: { cartoon: 'cartoon' }}); </script>
<script>
require(['cartoon'], function(ct) {

var loader = ct.Preload;

var parse = function(image, json, dura) {
	var ss = {
		images: [image],
		frames: [],
		animations: {}
	}
	
	json = loader.getItem(json);
	
	var frames = json.frames,
		sheet, frame, size;
		
	for (var i = 0, l = frames.length; i < l; i++) {
		sheet = frames[i];
		frame = sheet.frame;
		size = sheet.spriteSourceSize;
		if (i === 0) {
			ox = oy = 0;
			dx = size.x;
			dy = size.y;
		} else {
			ox = size.x - dx;
			oy = size.y - dy;
		}
		ss.frames.push([frame.x, frame.y, frame.w, frame.h, 0, ox, oy]);
	}
	
	ss.animations.all = [0, l-1, false, dura];
	
	return ss;
}

loader.load([
	'images/sprite/christ.png',
	'images/sprite/christ.json',
	'images/sprite/girl.png',
	'images/sprite/girl.json'
]);

loader.on('complete', function(evt) {
	ct.setRenderMode('canvas');
	
	var girl = new ct.Sprite({ x: 100, y: 50, 
		ss: parse('images/sprite/girl.png', 'images/sprite/girl.json', 400) 
	});
	girl.play('all');
	
	var christ = new ct.Sprite({ x: 400, y: 100, 
		ss: parse('images/sprite/christ.png', 'images/sprite/christ.json', 1500) 
	});
	christ.play('all');
	
	var canvas = new ct.Canvas({ elem: '#canvas', width: 900, height: 450 });
	var bg = new ct.Shape({ g: { type: 'rect', width: canvas.width, height: canvas.height, fill: 'top,#ff0000,#ffff00' }})
	canvas.add(bg);
	canvas.add(girl);
	canvas.add(christ);

	var ticker = new ct.Ticker();
	ticker.add(canvas);
	ticker.start();
})




});
</script>