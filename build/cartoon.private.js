define("base",["require"],function(){"use strict";Array.prototype.indexOf||(Array.prototype.indexOf=function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},Array.prototype.forEach=function(t){for(var e=0,n=this.length;n>e;e++)t(this[e],e)});var t=function(t,e){1===arguments.length&&(e=t,t=this);for(var n in e)t[n]=e[n]},e=function(t,e){return Math.round(Math.random()*(e-t))+t},n=function(){if(void 0!==window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var t=document.body,e=document.documentElement;return{width:Math.min(t.clientWidth,e.clientWidth),height:Math.min(t.clientHeight,e.clientHeight)}},i=function(t){this._renderMode="canvas"===t||1===t?1:0};return{_renderMode:0,extend:t,random:e,getWinSize:n,setRenderMode:i}}),define("_0",["require"],function(){var t=function(){},e=!1,n=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;return t.extend=function(i){var s=this,r=this.prototype,a=function(){!e&&this.init&&this.init.apply(this,arguments)};s!==t&&(e=!0,a.prototype=new s),e=!1;var o=a.prototype;for(var h in i)o[h]="function"==typeof r[h]&&"function"==typeof i[h]&&n.test(i[h])?function(t,e){return function(){var n=this._super;this._super=r[t];var i=e.apply(this,arguments);return this._super=n,i}}(h,i[h]):i[h];return a.extend=arguments.callee,a},t}),define("_2",["require"],function(){"use strict";var t=function(){};return t._index=0,t._collection={},t.get=function(t,e,n){var i=t._tagIndex;i||(i=t._tagIndex=++this._index);var s="@"+i+":"+e,r=this._collection[s];return n&&(this._collection[s]=null),r},t.set=function(t,e,n){var i=t._tagIndex;i||(i=t._tagIndex=++this._index),this._collection["@"+i+":"+e]=n},t}),define("_1",["require","_0","_2"],function(t){"use strict";var e=t("_0"),n=t("_2"),i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.setTimeout,s=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||window.clearTimeout,r=e.extend({fps:-1,interval:-1,_paused:!0,_timerId:null,_targets:null,init:function(t){t?(this.interval=t,this.fps=(1e3/t).toFixed(2)):(this.interval=16.67,this.fps=60),this._targets=[]},alive:function(){return!this._paused},start:function(){this._clearTimer(),this._paused=!1,this._setTimer()},stop:function(){this._clearTimer(),this._paused=!0},has:function(t){for(var e=this._targets,n=e.length-1;n>=0;n--)if(e[n]===t)return!0;return!1},add:function(t,e){t.update instanceof Function&&(t._ticker&&t._ticker.remove(t),t._ticker=this),this._targets.push(t),e&&n.set(this,"tick."+e,t)},remove:function(t){"string"==typeof t&&(t=n.get(this,"tick."+t,!0));for(var e=this._targets,i=e.length-1;i>=0;i--)if(e[i]===t){e.splice(i,1),t._ticker&&(t._ticker=null);break}},removeAll:function(){for(var t,e=this._targets;e.length;)t=e.pop(),t._ticker&&(t._ticker=null)},wait:function(t,e,n){var i=this,s=0,r=function(n){s+=n,s>=e&&(t(s),i.remove(r))};this.add(r,n)},loop:function(t,e,n){var i=0,s=function(n){i+=n,i>=e&&(t(i),i=0)};this.add(s,n)},_clearTimer:function(){this._timerId&&(s(this._timerId),this._timerId=null)},_setTimer:function(){var t,e,n,s,r,a,o=this,h=o.interval,u=i===window.setTimeout,c=.97*(h-1),l=[],f=function(){return(new Date).getTime()},d=function(){return u?!0:e?(n=f(),n-e>c?(e=n,!0):!1):(e=f(),!0)},p=function(){if(t){if(n=f(),s=n-t,t=n,l.push(s),l.length>=10){l.splice(0,5),r=0,a=l.length;for(var e=0;a>e;e++)r+=l[e];o.fps=Math.floor(1e3*a/r)}s>3*h&&(s=3*h)}else t=f(),s=h;o._execTick(s)},g=function(){d()&&p(),o._clearTimer(),o._paused||(o._timerId=i(g,h))};g()},_execTick:function(t){for(var e,n=this._targets,i=0,s=n.length;s>i&&!this._paused;i++)e=n[i],e&&(e.update instanceof Function?e.update(t):e instanceof Function&&e(t))}});return new r}),define("_3",["require","_0","_2"],function(t){"use strict";var e=t("_0"),n=t("_2"),i=e.extend({_listeners:null,on:function(t,e,i){this.addEventListener(t,e),i&&n.set(this,"event."+t+"."+i,e)},off:function(t,e){"string"==typeof e&&(e=n.get(this,"event."+t+"."+e,!0)),this.removeEventListener(t,e)},trigger:function(t){this.dispatchEvent(t)},addEventListener:function(t,e){this._listeners||(this._listeners={});var n=this._listeners,i=n[t];i||(i=n[t]=[]),-1===i.indexOf(e)&&i.push(e)},hasEventListener:function(t,e){if(!this._listeners)return!1;var n=this._listeners,i=n[t];return i?e?-1!==i.indexOf(e):i.length>0:!1},removeEventListener:function(t,e){if(this._listeners){var n=this._listeners,i=n[t];if(i)if(e){var s=i.indexOf(e);-1!==s&&i.splice(s,1)}else i.length>0&&(n[t]=[])}},dispatchEvent:function(t){if(this._listeners){var e=this._listeners,n=e[t.type];if(n){t.target=this;for(var i=0,s=n.length;s>i;i++)n[i].call(this,t)}}}});return i}),define("_5",["require","_3"],function(t){"use strict";var e=t("_3"),n=/^(http|https):\/\//,i=/\?(.*)=(.*)$/,s=/\.jpg$|\.png$|\.gif$/,r=/\.json$/,a=e.extend({_resPath:"",_version:"",_resources:null,_loadQueue:null,_loadQueueLength:-1,init:function(){this._resources={},this._loadQueue=[]},load:function(t){if(t instanceof Array){for(var e,n,i=this._loadQueueLength=t.length,a=0;i>a;a++)e=t[a],n=s.test(e)?"image":r.test(e)?"json":"text",this._loadQueue.push({type:n,url:e});i&&this._loadNext()}else{var o=t;"image"===o.type?this._loadImage(o):this._loadJson(o)}},setResPath:function(t){this._resPath=t},setVersion:function(t){this._version=t},getUrl:function(t){return n.test(t)||(t=this._resPath+t),!i.test(t)&&this._version&&(t=t+"?v="+this._version),t},has:function(t){return t in this._resources},get:function(t){return this._resources[t]},set:function(t,e){this._resources[t]=e},_loadComplete:function(t,e){var n=1;this._loadQueueLength&&(n=1-this._loadQueue.length/this._loadQueueLength,this.trigger({type:"progress",progress:n})),t.onload&&t.onload(e),1>n?this._loadNext():(this._loadQueueLength=0,this.trigger({type:"complete",file:e}))},_loadNext:function(){this.load(this._loadQueue.shift())},_loadImage:function(t){var e=this,n=new Image;n.src=this.getUrl(t.url),n.complete?e._loadComplete(t,n):n.onload=function(){e._loadComplete(t,n)},this.set(t.url,n)},_loadJson:function(t){var e,n,i=this,s=new XMLHttpRequest;s.onreadystatechange=function(){s.readyState===s.DONE&&(200===s.status||0===s.status)&&(n=s.responseText,n&&(e="json"===t.type?JSON.parse(n):n,i.set(t.url,e),i._loadComplete(t,e)))},s.open("GET",this.getUrl(t.url),!0),s.send(null)}});return new a}),define("_6",["require","_0"],function(t){"use strict";var e=t("_0"),n=e.extend({_data:null,init:function(){this._data={}},get:function(t){return this._data[t]},set:function(t,e){return this._data[t]=e,e}});return n.step=function(t,e){var n=e.pos,i=e.start,s=e.end,r=t._userData;for(var a in s)r[a]=(s[a]-i[a])*n+i[a]},n}),define("_7",["require","_0"],function(t){"use strict";var e=t("_0"),n=Math.PI/180,i=e.extend({a:1,b:0,c:0,d:1,tx:0,ty:0,append:function(t,e,n,i,s,r){var a=this.a,o=this.b,h=this.c,u=this.d,c=this.tx,l=this.ty;return this.a=t*a+e*h,this.b=t*o+e*u,this.c=n*a+i*h,this.d=n*o+i*u,this.tx=s*a+r*h+c,this.ty=s*o+r*u+l,this},appendMatrix:function(t){return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty),this},appendTransform:function(t,e,i,s,r,a,o){var h,u,c;return r%360?(h=r*n,u=Math.cos(h),c=Math.sin(h)):(u=1,c=0),a||o?(a*=n,o*=n,this.append(Math.cos(o),Math.sin(o),-Math.sin(a),Math.cos(a),t,e),this.append(u*i,c*i,-c*s,u*s,0,0)):this.append(u*i,c*i,-c*s,u*s,t,e),this},identity:function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},invert:function(){var t=this.a,e=this.b,n=this.c,i=this.d,s=this.tx,r=t*i-e*n;return this.a=i/r,this.b=-e/r,this.c=-n/r,this.d=t/r,this.tx=(n*this.ty-i*s)/r,this.ty=-(t*this.ty-e*s)/r,this},isIdentity:function(){return 0==this.tx&&0==this.ty&&1==this.a&&0==this.b&&0==this.c&&1==this.d}});return i}),define("_8",["require"],function(){"use strict";var t=document.createElement("div").style,e=""===t.webkitTransform?"webkit":""===t.WebkitTransform?"Webkit":""===t.msTransform?"ms":""===t.MozTransform?"Moz":"ct",n="ct"===e&&""===t.filter,i=navigator.userAgent.indexOf("MSIE 9.0")>0,s=function(t,e){return"Object3D"===t.type?g.styles3d[e]:p[e]||t.styles&&t.styles[e]},r=function(t,e,n){var i;if(i=e?{get:function(){return this[t][e]},set:function(n,i){this[t][e]=i}}:{get:function(){return this[t]},set:function(e,n){this[t]=n}},i.step=function(t,e){var n=e.pos,i=e.start,s=e.end;if("object"==typeof s){var r={};for(var a in s)r[a]=(s[a]-i[a])*n+i[a];return r}return(s-i)*n+i},n)for(var s in n)i[s]=n[s];return i},a=function(t,e){var n=s(t,e);return n&&n.init?n.init.call(t,e):void 0},o=function(t,e){var n=s(t,e);return n?n.get.call(t,e):void 0},h=function(t,e,n){var i=s(t,e);i&&(i.parse&&(n=i.parse.call(t,n)),i.set.call(t,e,n),0===t.renderMode&&i.css&&i.css.call(t,e,n))},u=function(t,e,n){var i=s(t,e);if(i&&i.step){i.parse&&(n.end=i.parse.call(t,n.end));var r=i.step.call(t,e,n);void 0!==r&&h(t,e,r)}},c=function(t,n,i){var s=n.charAt(0).toUpperCase()+n.substring(1,n.length);t[e+s]=i},l=function(t){var e={r:0,g:0,b:0,a:1};return t.indexOf("rgb")>-1?(t=t.replace(/rgb\(|rgba\(|\)/g,""),t=t.split(","),e.r=parseInt(t[0]),e.g=parseInt(t[1]),e.b=parseInt(t[2]),4===t.length&&(e.a=t[3])):t.indexOf("#")>-1&&(4===t.length?(e.r=t.substring(1,2),e.g=t.substring(2,3),e.b=t.substring(3,4),e.r=parseInt(e.r+e.r,16),e.g=parseInt(e.g+e.g,16),e.b=parseInt(e.b+e.b,16)):(e.r=parseInt(t.substring(1,3),16),e.g=parseInt(t.substring(3,5),16),e.b=parseInt(t.substring(5,7),16))),e},f=function(t){var e=t.r.toString(16),n=t.g.toString(16),i=t.b.toString(16);return 1===e.length&&(e="0"+e),1===n.length&&(n="0"+n),1===i.length&&(i="0"+i),"#"+e+n+i},d=function(t,e,n){e=l(e),n=l(n);var i={};for(var s in n)i[s]=Math.floor((n[s]-e[s])*t+e[s]),i[s]=i[s]>255?255:i[s]<0?0:i[s];return f(i)},p={x:r("x",null,{css:function(t,e){var n=this.elemStyle;n.position="absolute",n.left=e+"px"}}),y:r("y",null,{css:function(t,e){var n=this.elemStyle;n.position="absolute",n.top=e+"px"}}),width:r("width",null,{css:function(t,e){this._useElemSize?this.elem.setAttribute("width",e):this.elemStyle.width=e+"px"}}),height:r("height",null,{css:function(t,e){this._useElemSize?this.elem.setAttribute("height",e):this.elemStyle.height=e+"px"}}),size:r("size",null,{get:function(){return{width:this.width,height:this.height}},set:function(t,e){void 0!==e.width&&(this.width=e.width),void 0!==e.height&&(this.height=e.height)},css:function(){if(this._useElemSize){var t=this.elem;t.setAttribute("width",this.width),t.setAttribute("height",this.height)}else{var e=this.elemStyle;e.width=this.width+"px",e.height=this.height+"px"}}}),transform:r("transform",null,{init:function(){return this.transform={translateX:0,translateY:0,rotate:0,scale:1,scaleX:1,scaleY:1,skewX:0,skewY:0,originX:.5,originY:.5},this.transform},get:function(t){return this.transform||a(this,t)},set:function(t,e){o(this,t);for(var n in e)this._updateTransform(n,e[n])},css:function(t,e){var i=this.elemStyle,s=this.transform;n?(i.marginLeft=s.translateX+"px",i.marginTop=s.translateY+"px"):(c(i,"transform",this._mergeTransformText()),("originX"in e||"originY"in e)&&c(i,"transformOrigin",100*s.originX+"% "+100*s.originY+"%"))}}),transform3d:r("transform3d",null,{init:function(){if(this.transform3d={perspective:0,translateX:0,translateY:0,translateZ:0,rotateX:0,rotateY:0,rotateZ:0,scaleX:1,scaleY:1,scaleZ:1,originX:.5,originY:.5,originZ:.5},0===this.renderMode){var t=this.elemStyle;c(t,"transformStyle","preserve-3d"),c(t,"backfaceVisibility","visible")}return this.transform3d},get:function(t){return this.transform3d||a(this,t)},set:function(t,e){o(this,t);for(var n in e)this._updateTransform3D(n,e[n])},css:function(t,e){var n=this.elemStyle,i=this.transform3d;c(n,"transform",this._mergeTransform3DText()),("originX"in e||"originY"in e||"originZ"in e)&&c(n,"transformOrigin",100*i.originX+"% "+100*i.originY+"%")}}),visible:r("visible",null,{css:function(t,e){this.elemStyle.display=e?"block":"none"}}),overflow:r("overflow",null,{css:function(t,e){this.elemStyle.overflow=e}}),alpha:r("alpha",null,{parse:function(t){return t>=0?t:0},css:function(t,e){var i=this.elemStyle;if(n){var s=i.filter,r=/alpha\(opacity=([^)]*)/,a="alpha(opacity="+100*e;i.filter=r.test(s)?s.replace(r,a):s+" "+a+")"}else i.opacity=e}}),shadow:r("shadow",null,{parse:function(t){return"string"==typeof t&&(t=t.split("px "),t={offsetX:parseFloat(t[0]),offsetY:parseFloat(t[1]),blur:parseFloat(t[2]),color:t[3]}),t},css:function(){var t=this.shadow,e="Text"===this.type?"textShadow":"boxShadow";this.elemStyle[e]=t.color?t.offsetX+"px "+t.offsetY+"px "+t.blur+"px "+t.color:""}}),cursor:r("cursor",null,{css:function(t,e){this.elemStyle.cursor=e}})},g={isIE6_8:n,isIE9:i,newStyle:r,styles:p,init:a,get:o,set:h,step:u,stepColor:d};return g}),define("_9",["require","base","_3","_6","_7","_2","_8"],function(t){"use strict";var e=t("base"),n=t("_3"),i=t("_6"),s=t("_7"),r=t("_2"),a=t("_8"),o=document.createElement("div"),h=!!document.createElement("canvas").getContext,u=n.extend({type:"DisplayObject",x:0,y:0,width:0,height:0,visible:!0,overflow:"visible",alpha:1,shadow:null,cursor:"auto",transform:null,transform3d:null,parent:null,children:null,elem:null,elemStyle:null,renderMode:-1,blendMode:"source-over",mouseEnabled:!0,pixelHitTest:!1,_htmlText:"<div></div>",_updaters:null,_matrix2d:null,_userData:null,init:function(t){if(t||(t={}),this.renderMode=void 0!==t.render?t.render:e._renderMode,0===this.renderMode){var n=t.elem||this._htmlText;"string"==typeof n&&(/^<.+>$/.test(n)?(o.innerHTML=n,n=o.removeChild(o.firstChild)):n=document.querySelector&&document.querySelector(n)),this.elem=n,this.elem.displayObj=this,this.elemStyle=this.elem.style,window.jQuery&&(this.$=jQuery(this.elem))}else{var r=t.blendMode||t.blend;r&&(this.blendMode=r)}this.children=[],this._updaters=[],this._matrix2d=new s,this._userData=new i;for(var h in t)a.styles[h]&&this.style(h,t[h]);this.transform||a.init(this,"transform")},add:function(t,e){return this.addAt(t,"none",e),this},addAt:function(t,e,n){var i=this.children,s=this.elem,a=0===t.renderMode&&0===this.renderMode,o=a&&s.children[e];t.parent&&t.parent.remove(t),t.parent=this,e<i.length?this.children.splice(e,0,t):this.children.push(t),a&&(o?s.insertBefore(t.elem,o):s.appendChild(t.elem)),this._addUpdater(t),n&&r.set(this,"child."+n,t)},remove:function(t){if("string"==typeof t&&(t=r.get(this,"child."+t,!0)),t.parent===this){t.parent=null;var e=this.children,n=e.indexOf(t);e.splice(n,1),0===t.renderMode&&0===this.renderMode&&this.elem.removeChild(t.elem),this._removeUpdater(t)}return this},removeAll:function(){for(var t,e,n=this.children;n.length;)t=n.length-1,e=n[t],e.parent=null,n.splice(t,1),0===e.renderMode&&0===this.renderMode&&this.elem.removeChild(e.elem),this._removeUpdater(e)},each:function(t){for(var e=this.children,n=0,i=e.length;i>n;n++)t(e[n],n)},enable:function(t){this.mouseEnabled=t?!0:!1,0===this.renderMode&&(this.elemStyle.pointerEvents=t?"auto":"none")},style:function(t,e){if(void 0===e){if("object"!=typeof t)return a.get(this,t);for(var n in t)a.set(this,n,t[n])}else a.set(this,t,e)},data:function(t,e){if(void 0===e){if("object"!=typeof t)return this._userData.get(t);for(var n in t)this._userData.set(n,t[n])}else this._userData.set(t,e)},draw:function(t){if(this.children.length){"hidden"===this.overflow&&(t.beginPath(),t.rect(0,0,this.width,this.height),t.clip(),t.closePath());for(var e,n=this.children,i=0,s=n.length;s>i;i++)e=n[i],e.visible&&e._drawCanvas(t)}},mask:function(){},cache:function(){if(h){var t=document.createElement("canvas");t.width=this.width,t.height=this.height,this.draw(t.getContext("2d")),this._cacheCanvas=t}},uncache:function(){this._cacheCanvas=null},_stepTween:function(t,e){"data"===t?i.step(this,e):a.step(this,t,e)},_isUpdater:function(t){return t.update||t.hasEventListener("update")||"DisplayObject"===t.type},_addUpdater:function(t){this._isUpdater(t)&&this._updaters.push(t)},_removeUpdater:function(t){if(this._isUpdater(t)){var e=this._updaters,n=e.indexOf(t);e.splice(n,1)}},_eachUpdaters:function(t){for(var e,n=this._updaters,i=0,s=n.length;s>i;i++)e=n[i],e&&(e.hasEventListener("update")&&e.trigger({type:"update",delta:t}),e.update?e.update(t):"DisplayObject"===e.type&&e._eachUpdaters(t))},_updateTransform:function(t,e){"scale"===t?this.transform.scale=this.transform.scaleX=this.transform.scaleY=e:t in this.transform&&(this.transform[t]=e)},_updateTransform3D:function(t,e){t in this.transform3d&&(this.transform3d[t]=e)},_mergeTransformText:function(){var t=this.transform,e="";return(0!==t.translateX||0!==t.translateY)&&(e+="translate("+t.translateX+"px,"+t.translateY+"px)"),0!==t.rotate&&(e+=" rotate("+t.rotate+"deg)"),(1!==t.scaleX||1!==t.scaleY)&&(e+=" scale("+t.scaleX+","+t.scaleY+")"),(0!==t.skewX||0!==t.skewY)&&(e+=" skew("+t.skewX+"deg,"+t.skewY+"deg)"),e},_mergeTransform3DText:function(){var t=this.transform3d,e="";return 0!==t.perspective&&(e+="perspective("+t.perspective+"px)"),(0!==t.translateX||0!==t.translateY||0!==t.translateZ)&&(e+=" translate3d("+t.translateX+"px,"+t.translateY+"px,"+t.translateZ+"px)"),0!==t.rotateX&&(e+=" rotateX("+t.rotateX+"deg)"),0!==t.rotateY&&(e+=" rotateY("+t.rotateY+"deg)"),0!==t.rotateZ&&(e+=" rotateZ("+t.rotateZ+"deg)"),(1!==t.scaleX||1!==t.scaleY||1!==t.scaleZ)&&(e+=" scale3d("+t.scaleX+","+t.scaleY+","+t.scaleZ+")"),e},_drawCanvas:function(t){t.save(),this._updateCanvasContext(t),this._cacheCanvas?t.drawImage(this._cacheCanvas,0,0):this.draw(t),t.restore()},_updateCanvasContext:function(t){var e=this._updateMatrix2D(),n=this._getAnchorX(),i=this._getAnchorY(),s=this.shadow;0===n&&0===i?t.transform(e.a,e.b,e.c,e.d,e.tx,e.ty):(t.transform(e.a,e.b,e.c,e.d,e.tx+n,e.ty+i),t.transform(1,0,0,1,-n,-i)),t.globalAlpha*=this.alpha,t.globalCompositeOperation=this.blendMode,s&&(t.shadowOffsetX=s.offsetX,t.shadowOffsetY=s.offsetY,t.shadowBlur=s.blur,t.shadowColor=s.color)},_getAnchorX:function(){return this.width*this.transform.originX},_getAnchorY:function(){return this.height*this.transform.originY},_updateMatrix2D:function(){var t=this._matrix2d.identity(),e=this.transform;return t.appendTransform(this.x+e.translateX,this.y+e.translateY,e.scaleX,e.scaleY,e.rotate,e.skewX,e.skewY)},_updateWorldMatrix:function(){for(var t=this,e=[];t;)e.unshift(t),t=t.parent;var n=new s;return e.forEach(function(t){var e=t.transform,i=t._getAnchorX(),s=t._getAnchorY();n.appendTransform(t.x+e.translateX+i,t.y+e.translateY+s,e.scaleX,e.scaleY,e.rotate,e.skewX,e.skewY),(i||s)&&n.append(1,0,0,1,-i,-s)}),n}});return u}),define("_10",["require","base","_9"],function(t){"use strict";var e=(t("base"),t("_9")),n=e.extend({type:"Stage",autoUpdate:!0,init:function(t){t.render=0,this._super(t),this._initEvents()},update:function(t){this.autoUpdate&&this._eachUpdaters(t)},_initEvents:function(){var t,e,n,i,s,r,a=this,o=this.elem,h=function(t){var e=(t.target||t.srcElement).tagName.toLowerCase();"a"!==e&&"input"!==e&&"select"!==e&&"textarea"!==e&&(t.preventDefault?t.preventDefault():window.event.returnValue=!1)},u=function(o){h(o),t=a._getMouseX(o),e=a._getMouseY(o),n=a._hitTest(o.target||o.srcElement)||a,a._triggerEvent("mousedown",n,t,e),i=!1,s=t,r=e},c=function(s){h(s),a._triggerEvent("mouseup",n,t,e),i||a._triggerEvent("click",n,t,e),n=null},l=function(o){h(o),t=a._getMouseX(o),e=a._getMouseY(o),a._triggerEvent("mousemove",n||a,t,e),!i&&(Math.abs(t-s)>3||Math.abs(e-r)>3)&&(i=!0)};"ontouchstart"in window?(o.addEventListener("touchstart",u,!1),o.addEventListener("touchend",c,!1),o.addEventListener("touchmove",l,!1)):o.attachEvent?(o.attachEvent("onmousedown",u,!1),o.attachEvent("onmouseup",c,!1),o.attachEvent("onmousemove",l,!1)):(o.addEventListener("mousedown",u,!1),o.addEventListener("mouseup",c,!1),o.addEventListener("mousemove",l,!1))},_getMouseX:function(t){var e=t.touches?t.touches[0]:t,n=this.elem.getBoundingClientRect().left;return e.clientX-n},_getMouseY:function(t){var e=t.touches?t.touches[0]:t,n=this.elem.getBoundingClientRect().top;return e.clientY-n},_triggerEvent:function(t,e,n,i){if(e)for(var s={type:t,srcTarget:e,mouseX:n,mouseY:i};e;)e.trigger(s),e=e.parent},_hitTest:function(t){for(var e;!e&&t&&t!==this.elem;)e=t.displayObj,t=t.parentNode;return e}});return n}),define("_15",["require","_5","_9"],function(t){"use strict";var e=t("_5"),n=t("_9"),i=n.extend({type:"Bitmap",_image:null,_srcRect:null,_srcCanvas:null,_scaleToFit:!1,init:function(t){this._super(t),this._initImage(t)},draw:function(t){if(this._image.complete){var e=this._srcCanvas||this._image;this._srcRect?t.drawImage(e,this._srcRect.x,this._srcRect.y,this.width,this.height,0,0,this.width,this.height):this._scaleToFit?t.drawImage(e,0,0,e.width,e.height,0,0,this.width,this.height):t.drawImage(e,0,0,this.width,this.height,0,0,this.width,this.height)}},source:function(t,e){return void 0===t?this._srcCanvas||this._image:void this._initImage(t instanceof Array?{rect:t}:{image:t,rect:e})},_initImage:function(t){var n=t.image,i=t.rect||t.sourceRect,s=!!t.scaleToFit,r=this.elemStyle;i?(this._srcRect={x:i[0],y:i[1]},this.style("size",{width:i[2],height:i[3]}),0===this.renderMode&&(r.backgroundPosition="-"+this._srcRect.x+"px -"+this._srcRect.y+"px")):s&&(this._scaleToFit=s,0===this.renderMode&&(r.backgroundSize="100% 100%")),n&&(this._image=n,0===this.renderMode?(r.backgroundImage="url("+e.getUrl(n)+")",r.backgroundRepeat="no-repeat"):1===this.renderMode&&"string"==typeof n&&(e.has(n)||e.load({type:"image",url:n}),this._image=e.get(n)))}});return i}),define("_22",["require"],function(){"use strict";var t=function(){};t.get=function(t){return e[t]||e.linear};var e={none:function(t){return t>=1?1:0},linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},easeInQuad:function(t,e,n,i,s){return i*(e/=s)*e+n},easeOutQuad:function(t,e,n,i,s){return-i*(e/=s)*(e-2)+n},easeInOutQuad:function(t,e,n,i,s){return(e/=s/2)<1?i/2*e*e+n:-i/2*(--e*(e-2)-1)+n},easeInCubic:function(t,e,n,i,s){return i*(e/=s)*e*e+n},easeOutCubic:function(t,e,n,i,s){return i*((e=e/s-1)*e*e+1)+n},easeInOutCubic:function(t,e,n,i,s){return(e/=s/2)<1?i/2*e*e*e+n:i/2*((e-=2)*e*e+2)+n},easeInQuart:function(t,e,n,i,s){return i*(e/=s)*e*e*e+n},easeOutQuart:function(t,e,n,i,s){return-i*((e=e/s-1)*e*e*e-1)+n},easeInOutQuart:function(t,e,n,i,s){return(e/=s/2)<1?i/2*e*e*e*e+n:-i/2*((e-=2)*e*e*e-2)+n},easeInQuint:function(t,e,n,i,s){return i*(e/=s)*e*e*e*e+n},easeOutQuint:function(t,e,n,i,s){return i*((e=e/s-1)*e*e*e*e+1)+n},easeInOutQuint:function(t,e,n,i,s){return(e/=s/2)<1?i/2*e*e*e*e*e+n:i/2*((e-=2)*e*e*e*e+2)+n},easeInSine:function(t,e,n,i,s){return-i*Math.cos(e/s*(Math.PI/2))+i+n},easeOutSine:function(t,e,n,i,s){return i*Math.sin(e/s*(Math.PI/2))+n},easeInOutSine:function(t,e,n,i,s){return-i/2*(Math.cos(Math.PI*e/s)-1)+n},easeInExpo:function(t,e,n,i,s){return 0==e?n:i*Math.pow(2,10*(e/s-1))+n},easeOutExpo:function(t,e,n,i,s){return e==s?n+i:i*(-Math.pow(2,-10*e/s)+1)+n},easeInOutExpo:function(t,e,n,i,s){return 0==e?n:e==s?n+i:(e/=s/2)<1?i/2*Math.pow(2,10*(e-1))+n:i/2*(-Math.pow(2,-10*--e)+2)+n},easeInCirc:function(t,e,n,i,s){return-i*(Math.sqrt(1-(e/=s)*e)-1)+n},easeOutCirc:function(t,e,n,i,s){return i*Math.sqrt(1-(e=e/s-1)*e)+n},easeInOutCirc:function(t,e,n,i,s){return(e/=s/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+n:i/2*(Math.sqrt(1-(e-=2)*e)+1)+n},easeInElastic:function(t,e,n,i,s){var r=1.70158,a=0,o=i;if(0==e)return n;if(1==(e/=s))return n+i;if(a||(a=.3*s),o<Math.abs(i)){o=i;var r=a/4}else var r=a/(2*Math.PI)*Math.asin(i/o);return-(o*Math.pow(2,10*(e-=1))*Math.sin(2*(e*s-r)*Math.PI/a))+n},easeOutElastic:function(t,e,n,i,s){var r=1.70158,a=0,o=i;if(0==e)return n;if(1==(e/=s))return n+i;if(a||(a=.3*s),o<Math.abs(i)){o=i;var r=a/4}else var r=a/(2*Math.PI)*Math.asin(i/o);return o*Math.pow(2,-10*e)*Math.sin(2*(e*s-r)*Math.PI/a)+i+n},easeInOutElastic:function(t,e,n,i,s){var r=1.70158,a=0,o=i;if(0==e)return n;if(2==(e/=s/2))return n+i;if(a||(a=.3*s*1.5),o<Math.abs(i)){o=i;var r=a/4}else var r=a/(2*Math.PI)*Math.asin(i/o);return 1>e?-.5*o*Math.pow(2,10*(e-=1))*Math.sin(2*(e*s-r)*Math.PI/a)+n:o*Math.pow(2,-10*(e-=1))*Math.sin(2*(e*s-r)*Math.PI/a)*.5+i+n},easeInBack:function(t,e,n,i,s,r){return void 0==r&&(r=1.70158),i*(e/=s)*e*((r+1)*e-r)+n},easeOutBack:function(t,e,n,i,s,r){return void 0==r&&(r=1.70158),i*((e=e/s-1)*e*((r+1)*e+r)+1)+n},easeInOutBack:function(t,e,n,i,s,r){return void 0==r&&(r=1.70158),(e/=s/2)<1?i/2*e*e*(((r*=1.525)+1)*e-r)+n:i/2*((e-=2)*e*(((r*=1.525)+1)*e+r)+2)+n},easeInBounce:function(t,n,i,s,r){return s-e.easeOutBounce(t,r-n,0,s,r)+i},easeOutBounce:function(t,e,n,i,s){return(e/=s)<1/2.75?7.5625*i*e*e+n:2/2.75>e?i*(7.5625*(e-=1.5/2.75)*e+.75)+n:2.5/2.75>e?i*(7.5625*(e-=2.25/2.75)*e+.9375)+n:i*(7.5625*(e-=2.625/2.75)*e+.984375)+n},easeInOutBounce:function(t,n,i,s,r){return r/2>n?.5*e.easeInBounce(t,2*n,0,s,r)+i:.5*e.easeOutBounce(t,2*n-r,0,s,r)+.5*s+i},easeIn:function(t,n,i,s,r){return e.easeInQuad(t,n,i,s,r)},easeOut:function(t,n,i,s,r){return e.easeOutQuad(t,n,i,s,r)},easeInOut:function(t,n,i,s,r){return e.easeInOutQuad(t,n,i,s,r)},expoIn:function(t,n,i,s,r){return e.easeInExpo(t,n,i,s,r)},expoOut:function(t,n,i,s,r){return e.easeOutExpo(t,n,i,s,r)},expoInOut:function(t,n,i,s,r){return e.easeInOutExpo(t,n,i,s,r)},bounceIn:function(t,n,i,s,r){return e.easeInBounce(t,n,i,s,r)},bounceOut:function(t,n,i,s,r){return e.easeOutBounce(t,n,i,s,r)},bounceInOut:function(t,n,i,s,r){return e.easeInOutBounce(t,n,i,s,r)},elasIn:function(t,n,i,s,r){return e.easeInElastic(t,n,i,s,r)},elasOut:function(t,n,i,s,r){return e.easeOutElastic(t,n,i,s,r)},elasInOut:function(t,n,i,s,r){return e.easeInOutElastic(t,n,i,s,r)},backIn:function(t,n,i,s,r){return e.easeInBack(t,n,i,s,r)},backOut:function(t,n,i,s,r){return e.easeOutBack(t,n,i,s,r)},backInOut:function(t,n,i,s,r){return e.easeInOutBack(t,n,i,s,r)}};return t.easing=e,t}),define("_21",["require","_0","_9"],function(t){"use strict";var e=t("_0"),n=t("_9"),i=e.extend({type:"Animation",_paused:!0,play:function(){this._paused=!1},stop:function(){this._paused=!0}});return i.AnimatedObject=n.extend({type:"AnimatedObject",_paused:!0,play:function(){this._paused=!1},stop:function(){this._paused=!0}}),i}),define("_23",["require","_0","_9","_22","_21"],function(t){"use strict";var e=(t("_0"),t("_9")),n=t("_22"),i=t("_21"),s=i.extend({from:0,to:0,start:null,end:null,easing:null,_target:null,_deltaTime:-1,init:function(t,e,i,s){this._target=t,this._deltaTime=0;var r=e.start,a=e.end;if(r)t.style(r),r.data&&t.data(r.data);else{r={};for(var o in a)r[o]=this._clone("data"===o?t._userData:t.style(o))}this.start=r,this.end=a,this.from=e.from,this.to=e.to,this.easing=n.get(e.easing),this.callback=i,this.tick=s},finish:function(){this.stop(),this.callback&&this.callback()},update:function(t){if(!this._paused){var e=this._target,n=this.start,i=this.end,s=this.to-this.from,r=this.easing,a=this._deltaTime,o=a/s,h=0===o||1===o?o:r(o,o,0,1,1);for(var u in i)e._stepTween(u,{pos:h,start:n[u],end:i[u]});if(this.tick&&this.tick(o,h),a===s)this.finish();else{var c=a+t;this._deltaTime=c>s?s:c}}},_clone:function(t){var e;if("object"==typeof t){e={};for(var n in t)e[n]=this._clone(t[n])}else e=t;return e}});return s._tweens=[],s._currentTarget=null,s.destroyAll=function(){for(var t,e=this._tweens,n=0,i=e.length;i>n;n++)t=e[n]._target,t._fxQueue=t._fxTween=null;this._tweens=[]},s.update=function(t){for(var e=this._tweens,n=e.length-1;n>=0;n--)e[n]._paused&&e.splice(n,1);for(var n=0,i=e.length;i>n;n++)e[n].update(t)},s.get=function(t){return this._currentTarget=t,this},s.has=function(t){return!!t._fxQueue},s.exec=function(t,e){var n=this._currentTarget;switch(t){case"shift":n._fxTween?(n._fxTween.stop(),n._fxTween.callback()):n._fxQueue&&n._fxQueue.shift();break;case"pop":n._fxQueue&&n._fxQueue.pop();break;case"stop":n._fxTween&&n._fxTween.stop(),n._fxQueue=n._fxTween=null;break;case"fadeIn":this.addTween({alpha:1},null,null,e);break;case"fadeOut":this.addTween({alpha:0},null,null,e)}},s.addTween=function(t,e,n,i,r){var a=this._currentTarget,o=a._fxQueue;if("number"==typeof t)i=e,e=t,t={},n="none";else if("string"==typeof t)return i=e,void this.exec(t,i);var h=function(){i&&i(),o=a._fxQueue,o&&o.length>0?o.shift()():(a._fxQueue=a._fxTween=null,a.trigger({type:"tweenend"}))},u=function(){var i=new s(a,{from:0,to:e||300,start:null,end:t,easing:n||"linear"},h,r);i.play(),a._fxTween=i,s._tweens.push(i)};o?o.push(u):(u(),a._fxQueue=[])},e.prototype.to=function(t,e,n,i,r){return s.get(this).addTween(t,e,n,i,r),this},s}),define("_24",["require","_0","_9","_21"],function(t){"use strict";var e=(t("_0"),t("_9")),n=t("_21"),i=n.extend({data:null,_target:null,_deltaTime:-1,init:function(t,e,n,i){this._target=t,this.data=e,this._deltaTime=0,this._sx=t.x,this._sy=t.y,this.update=this[e.type],this.tick=n,this.callback=i},finish:function(){this.stop(),this.callback&&this.callback()},move:function(t){var e,n,i=this.data,s=this._target,r=this._sx,a=this._sy,o=this._deltaTime,h=i.path[0],u=i.v,c=h[0]-r,l=h[1]-a,f=Math.sqrt(c*c+l*l),d=u*o;d>f?(i.path.shift(),e=h[0],n=h[1],this._deltaTime=0,this._sx=e,this._sy=n):(e=c/f*d+r,n=l/f*d+a),s.style({x:e,y:n}),!i.path.length||this.tick&&this.tick(o,e,n)?this.finish():this._deltaTime+=t},speed:function(t){var e=this.data,n=this._target,i=this._sx,s=this._sy,r=this._deltaTime,a=e.vx,o=e.vy,h=e.ax,u=e.ay,c=h*r*r/2+r*a,l=u*r*r/2+r*o,f=i+c,d=s+l;n.style({x:f,y:d}),this.tick&&this.tick(r,f,d)?this.finish():this._deltaTime+=t},circle:function(t){var e=this.data,n=this._target,i=Math.PI/180,s=this._deltaTime,r=e.ox,a=e.oy,o=e.r,h=e.scx,u=e.scy,c=e.sdeg,l=e.vdeg,f=c+l*s,d=f*i,p=Math.cos(d)*o*h+r,g=Math.sin(d)*o*u+a;n.style({x:p,y:g}),this.tick&&this.tick(s,f,p,g)?this.finish():this._deltaTime+=t},bezier:function(t){var e=this.data,n=this._target,i=this._deltaTime/e.duration,s=i>1?1:i,r=e.p0,a=e.p1,o=e.p2,h=Math.pow(1-s,2)*r.x+2*s*(1-s)*a.x+Math.pow(s,2)*o.x,u=Math.pow(1-s,2)*r.y+2*s*(1-s)*a.y+Math.pow(s,2)*o.y;n.style({x:h,y:u}),this.tick&&this.tick(i,h,u)?this.finish():this._deltaTime+=t}});return i._currentTarget=null,i._movements=[],i.update=function(t){for(var e=this._movements,n=e.length-1;n>=0;n--)e[n]._paused&&e.splice(n,1);for(var n=0,i=e.length;i>n;n++)e[n].update(t)},i.get=function(t){return this._currentTarget=t,this},i.exec=function(t){var e=this._currentTarget;switch(t){case"stop":e._fxMovement&&e._fxMovement.stop(),e._fxMovement=null}},i.addMovement=function(t,e,n){var s,r=this._currentTarget;return"string"==typeof t?void this.exec(t,e):(s="circle"===t.type?new i(r,{type:"circle",ox:t.ox||0,oy:t.oy||0,r:t.r||0,scx:t.scx||1,scy:t.scy||1,sdeg:t.sdeg||0,vdeg:t.vdeg||0},e,n):"bezier"===t.type?new i(r,{type:"bezier",duration:t.duration||1e3,p0:t.p0||{x:0,y:0},p1:t.p1||{x:0,y:0},p2:t.p2||{x:0,y:0}},e,n):"speed"===t.type?new i(r,{type:"speed",vx:t.vx||0,vy:t.vy||0,ax:t.ax||0,ay:t.ay||0},e,n):new i(r,{type:"move",path:t.path||[],v:t.v||0},e,n),s.play(),r._fxMovement=s,void i._movements.push(s))},e.prototype.move=function(t,e,n){i.get(this).addMovement(t,e,n)},i}),define("_26",["require","_5","_21"],function(t){"use strict";var e=t("_5"),n=t("_21"),i=n.AnimatedObject.extend({type:"Sprite",_paused:!0,_spriteSheet:null,_images:null,_imageIndex:-1,_frames:null,_frameIndex:-1,_currentFrame:null,_animations:null,_currentAnimation:null,_deltaTime:-1,init:function(t){this._super(t),this._initSpriteSheet(t.spriteSheet||t.ss)
},play:function(t){"string"==typeof t?this.playAnimation(t):"number"==typeof t?this.gotoAndPlay(t):this._paused=!1},stop:function(){this._paused=!0},gotoAndPlay:function(t){this._paused=!1,this._currentAnimation=null,this._frameIndex=t},gotoAndStop:function(t){this._paused=!0,this._currentAnimation=null,this._frameIndex=t,this._updateFrame()},playAnimation:function(t){this._paused=!1;var e=this._animations[t];e&&(this._currentAnimation=e,this._frameIndex=e.start,this._deltaTime=0)},update:function(t){if(!this._paused){this._updateFrame();var e,n,i,s,r,a=this._currentAnimation;a?(e=a.name,n=a.start,i=a.end,s=a.next,r=a.duration):(e=null,n=0,i=this._frames.length-1,s=!0,r=0);var o;r>0?(this._deltaTime+=t,o=Math.floor((i-n+1)*(this._deltaTime/r)+n)):o=this._frameIndex+1,o>i?("string"==typeof s?this.playAnimation(s):s===!0?(this._frameIndex=n,this._deltaTime=0):this.stop(),this.trigger({type:"animationend",name:e,animation:a})):this._frameIndex=o}},draw:function(t){var e=this._currentFrame;if(e){var n=this._images[e[4]];n&&n.complete&&t.drawImage(n,e[0],e[1],e[2],e[3],0,0,e[2],e[3])}},_initSpriteSheet:function(t){this._spriteSheet=t,this._initImages(t.images),this._initFrames(t.frames),this._initAnimations(t.animations),this._offsetX=t.offsetX||0,this._offsetY=t.offsetY||0,this.play(0)},_initImages:function(t){this._imageIndex=-1,this._images=[];for(var n,i=0,s=t.length;s>i;i++)n=t[i],0!==this.renderMode&&(e.has(n)||e.load({type:"image",url:n}),n=e.get(n)),this._images.push(n)},_initFrames:function(t,e){if(e||(this._frames=[]),t instanceof Array)for(var n=0,i=t.length;i>n;n++)t[n]instanceof Array?this._frames.push(t[n]):this._initFrames(t[n],!0);else for(var s=0,r=t.rows;r>s;s++)for(var n=0,i=t.cols;i>n&&s*t.cols+n!==t.num;n++)this._frames.push([n*t.width,s*t.height,t.width,t.height,t.image||0,0,0])},_initAnimations:function(t){this._animations={};var e;for(var n in t)e=t[n],this._animations[n]={name:n,start:e[0],end:e[1],next:e[2],duration:e[3]}},_updateFrame:function(){var t=this._currentFrame=this._frames[this._frameIndex];if(t){(this.width!==t[2]||this.height!==t[3])&&this.style("size",{width:t[2],height:t[3]});var n=this.transform,i=this._offsetX+t[5],s=this._offsetY+t[6];if((n.translateX!==i||n.translateY!==s)&&this.style("transform",{translateX:i,translateY:s}),0===this.renderMode){var r=this.elemStyle;this._imageIndex!==t[4]&&(this._imageIndex=t[4],r.backgroundImage="url("+e.getUrl(this._images[t[4]])+")",r.backgroundRepeat="no-repeat"),r.backgroundPosition="-"+t[0]+"px -"+t[1]+"px"}}}});return i}),define("_31",["require","_0"],function(t){"use strict";function e(t){for(var e=[],i=0;i<t.length;i++){e[i]=[];for(var s=0,r=t[i];s<r.length;s++)e[i][s]=new n(i,s,r[s])}this.input=t,this.nodes=e}function n(t,e,n){this.data={},this.x=t,this.y=e,this.pos={x:t,y:e},this.type=n}function i(t){this.content=[],this.scoreFunction=t}var s=t("_0"),r={init:function(t){for(var e=0,n=t.length;n>e;e++)for(var i=0,s=t[e].length;s>i;i++){var r=t[e][i];r.f=0,r.g=0,r.h=0,r.cost=r.type,r.visited=!1,r.closed=!1,r.parent=null}},heap:function(){return new i(function(t){return t.f})},search:function(t,e,n,i){r.init(t),i=i||{};var s=i.heuristic||r.manhattan,a=!!i.diagonal,o=i.costDiagonal||1,h=i.costStraight||1,u=r.heap();for(u.push(e);u.size()>0;){var c=u.pop();if(c===n){for(var l=c,f=[];l.parent;)f.push(l),l=l.parent;return f.reverse()}c.closed=!0;for(var d=r.neighbors(t,c,a),p=0,g=d.length;g>p;p++){var m=d[p];if(!m.closed&&!m.isWall()){var _=c.g+m.cost,v=m.visited;(!v||_<m.g)&&(m.visited=!0,m.parent=c,m.h=m.h||s(m.pos,n.pos,h,o),m.g=_,m.f=m.g+m.h,v?u.rescoreElement(m):u.push(m))}}}return[]},manhattan:function(t,e){var n=Math.abs(e.x-t.x),i=Math.abs(e.y-t.y);return n+i},diagonal:function(t,e,n,i){var s=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return n*(s+r)+(i-2*n)*Math.min(s,r)},neighbors:function(t,e,n){var i=[],s=e.x,r=e.y;return t[s-1]&&t[s-1][r]&&(i.push(t[s-1][r]),t[s-1][r].cost=1),t[s+1]&&t[s+1][r]&&(i.push(t[s+1][r]),t[s+1][r].cost=1),t[s]&&t[s][r-1]&&(i.push(t[s][r-1]),t[s][r-1].cost=1),t[s]&&t[s][r+1]&&(i.push(t[s][r+1]),t[s][r+1].cost=1),n&&(t[s-1]&&t[s-1][r-1]&&(i.push(t[s-1][r-1]),t[s-1][r-1].cost=Math.SQRT2),t[s+1]&&t[s+1][r-1]&&(i.push(t[s+1][r-1]),t[s+1][r-1].cost=Math.SQRT2),t[s-1]&&t[s-1][r+1]&&(i.push(t[s-1][r+1]),t[s-1][r+1].cost=Math.SQRT2),t[s+1]&&t[s+1][r+1]&&(i.push(t[s+1][r+1]),t[s+1][r+1].cost=Math.SQRT2)),i}};e.prototype.toString=function(){for(var t,e,n,i,s="\n",r=this.nodes,a=0,o=r.length;o>a;a++){for(t="",e=r[a],n=0,i=e.length;i>n;n++)t+=e[n].type+" ";s=s+t+"\n"}return s},n.prototype.toString=function(){return"["+this.x+" "+this.y+"]"},n.prototype.isWall=function(){return 0===this.type},i.prototype={push:function(t){this.content.push(t),this.sinkDown(this.content.length-1)},pop:function(){var t=this.content[0],e=this.content.pop();return this.content.length>0&&(this.content[0]=e,this.bubbleUp(0)),t},remove:function(t){var e=this.content.indexOf(t),n=this.content.pop();e!==this.content.length-1&&(this.content[e]=n,this.scoreFunction(n)<this.scoreFunction(t)?this.sinkDown(e):this.bubbleUp(e))},size:function(){return this.content.length},rescoreElement:function(t){this.sinkDown(this.content.indexOf(t))},sinkDown:function(t){for(var e=this.content[t];t>0;){var n=(t+1>>1)-1,i=this.content[n];if(!(this.scoreFunction(e)<this.scoreFunction(i)))break;this.content[n]=e,this.content[t]=i,t=n}},bubbleUp:function(t){for(var e=this.content.length,n=this.content[t],i=this.scoreFunction(n);;){var s,r=t+1<<1,a=r-1,o=null;if(e>a){var h=this.content[a];s=this.scoreFunction(h),i>s&&(o=a)}if(e>r){var u=this.content[r],c=this.scoreFunction(u);(null===o?i:s)>c&&(o=r)}if(null===o)break;this.content[t]=this.content[o],this.content[o]=n,t=o}}};var a=s.extend({graph:null,_startNode:null,_endNode:null,init:function(t){this.graph=new e(t)},setStartNode:function(t,e){this._startNode=this.graph.nodes[t][e]},setEndNode:function(t,e){this._endNode=this.graph.nodes[t][e]},getAPath:function(){return r.search(this.graph.nodes,this._startNode,this._endNode,{diagonal:!1})},getPath:function(){var t=[];if(this._endNode===this._startNode)return t;if(this._endNode.isWall()){var e=this.getNearest(this._startNode,this._endNode);if(!e||e===this._startNode)return t;this.setEndNode(e.x,e.y)}if(this.isLink(this._startNode,this._endNode))return t.push(this._endNode),t;var n=r.search(this.graph.nodes,this._startNode,this._endNode,{diagonal:!0});if(n.length>1){n.unshift(this._startNode);for(var i=this.getDirection(n[0],n[1]),s=-1,a=1,o=n.length-1;o>a;a++)s=this.getDirection(n[a],n[a+1]),s!==i&&t.push(n[a]),i=s;t.push(n[n.length-1])}else t=n;return t.length>1&&(t.unshift(this._startNode),this.flody(t),t.shift()),t},flody:function(t){for(var e=[],n=0;n<t.length;n++)for(var i=t.length-1;i>=n+2;i--)if(this.isLink(t[n],t[i])){for(var s=n+1;i>s;s++)e.push(s);n=i-1;break}for(var n=e.length-1;n>=0;n--)t.splice(e[n],1)},pathToString:function(t){for(var e="(",n=0;n<t.length;n++)n>0&&(e+="|"),e+="("+t[n].x+"|"+t[n].y+")";return e+=")"},pathToArray:function(t){var e=t.length;t=t.substring(0,e-2),t=t.substring(2,t.length);for(var n,i,s=t.split(")|("),r=[],a=0;a<s.length;a++)n=s[a].split("|")[0],i=s[a].split("|")[1],r.push(this.graph.nodes[parseInt(n)][parseInt(i)]);return r},isWall:function(t,e){return this.graph.nodes[t][e].isWall()},isLink:function(t,e){for(var n,i,s=e.x-t.x,r=e.y-t.y,a=Math.sqrt(s*s+r*r),o=.2,h=s/a*o,u=r/a*o,c=0,l=this.graph.nodes;a>0;)if(c++,a-=o,n=Math.floor(t.x+.5+c*h),i=Math.floor(t.y+.5+c*u),l[n][i].isWall())return!1;return!0},getNearest:function(t,e){var n=r.neighbors(this.graph.nodes,e,!0),i=-1,s=null,a=this,o=-1;return n.forEach(function(e){e.isWall()||(i=a.getDistance(t,e),(0>o||o>i)&&(o=i,s=e))}),s},getDistance:function(t,e){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},getDirection:function(t,e){return e.x>t.x?e.y>t.y?0:e.y===t.y?1:2:e.x===t.x?e.y>t.y?3:e.y===t.y?4:5:e.y>t.y?6:e.y===t.y?7:8}});return a}),define("cartoon.private",["require","base","_0","_1","_5","_9","_10","_15","_23","_24","_26","_31"],function(t){"use strict";var e=t("base");return e.extend({Class:t("_0"),Ticker:t("_1"),Preload:t("_5"),DisplayObject:t("_9"),Stage:t("_10"),Bitmap:t("_15"),Tween:t("_23"),Movement:t("_24"),Sprite:t("_26"),PathFinder:t("_31")}),e.extend({setRenderMode:function(t){var e=this.DisplayObject.prototype;e.renderMode="canvas"===t||1===t?1:0}}),e});