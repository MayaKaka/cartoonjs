define("_14",["require","_15"],function(t){"use strict";var e=t("_15"),a=!!document.createElement("canvas").getContext,r=document.createElement("div").style,i=""===r.webkitTransform?"webkit":""===r.WebkitTransform?"Webkit":""===r.msTransform?"ms":""===r.MozTransform?"Moz":"ct",n=function(){};return n.get=function(t,e,a){var r=n.filters[e];return r?r(t,a):void 0},n.filters={grayscale:function(t){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var a=e.getContext("2d");a.drawImage(t,0,0);for(var r,i=a.getImageData(0,0,e.width,e.height),n=i.data,o=0,h=n.length;h>o;o+=4)r=(n[o]+n[o+1]+n[o+2])/3,n[o]=n[o+1]=n[o+2]=r;return a.putImageData(i,0,0),e},brightness:function(t){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var a=e.getContext("2d");return a.drawImage(t,0,0),a.globalCompositeOperation="lighter",a.drawImage(t,0,0),e},impression:function(t){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var a=e.getContext("2d");a.drawImage(t,0,0);for(var r=a.getImageData(0,0,e.width,e.height),i=r.data,n=["1","0"],o=[],h=0,d=i.length;d>h;h+=16)Math.floor(h/4/e.width)%4||o.push(["rgba("+i[h]+","+i[h+1]+","+i[h+2]+","+i[h+3]+")",n[Math.floor(Math.random()*n.length)],h/4%e.width,Math.floor(h/4/e.width)]);a.clearRect(0,0,e.width,e.height),a.font="40px Microsoft Yahei",a.textBaseline="middle",a.textAlign="center",a.globalAlpha=.25;for(var l,g;o.length;)l=Math.floor(Math.random()*o.length),g=o[l],a.fillStyle=g[0],a.fillText(g[1],g[2],g[3]),o.splice(l,1);return e},rilievo:function(t){var e=document.createElement("canvas");e.width=t.width,e.height=t.height;var a=e.getContext("2d");a.drawImage(t,0,0);for(var r,i,n,o=a.getImageData(0,0,e.width,e.height),h=o.data,d=function(t){return 0>t?t=0:t>255&&(t=255),t},l=0,g=h.length;g>l;l+=4)r=l+4,void 0===h[r]&&(r=l),i=Math.floor(h[r]+h[r+1]+h[r+2]-(h[l]+h[l+1]+h[l+2])),n=d(i+128),h[l]=h[l+1]=h[l+2]=n;return a.putImageData(o,0,0),e}},e.prototype.apply=function(t,e){if(0===this.renderMode)this.elemStyle[i+"Filter"]=t?t+"("+e+")":"";else if(1===this.renderMode){var r=this._image;if(r.complete)this._srcCanvas=t&&a?n.get(r,t,e):null;else{var o=this;r.addEventListener||(r.addEventListener=r.attachEvent),r.addEventListener("load",function(){o.apply(t,e)})}}},n}),define("cartoon.filter",["require","cartoon","_14"],function(t){"use strict";var e=t("cartoon");return e.extend({Filter:t("_14")}),e});